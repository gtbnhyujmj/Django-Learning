ğŸ”§ æ€éº¼è®“ Django æ¯å€‹ app ç”¨ä¸åŒçš„è³‡æ–™åº«ï¼Ÿ

é€™è£¡æˆ‘çµ¦ä½  å®Œæ•´çš„åšæ³• + è¨­å®šç¯„ä¾‹ï¼š
âœ… ä¸€ã€settings.py è¨­å®šå¤šå€‹è³‡æ–™åº«

# settings.py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'accounts/accounts_db.sqlite3',
    },
    'products': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'products/products_db.sqlite3',
    }
}

âœ… äºŒã€å»ºç«‹è³‡æ–™åº«è·¯ç”±å™¨ routers.py

ä½ è¦è‡ªå·±å»ºç«‹ä¸€æ”¯ routers.pyï¼Œæ”¾åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ï¼ˆå’Œ settings.py åŒå±¤ï¼‰ï¼š

# routers.py

class AppRouter:
    def db_for_read(self, model, **hints):
        if model._meta.app_label == 'accounts':
            return 'default'
        elif model._meta.app_label == 'products':
            return 'products'
        return None

    def db_for_write(self, model, **hints):
        if model._meta.app_label == 'accounts':
            return 'default'
        elif model._meta.app_label == 'products':
            return 'products'
        return None

    def allow_migrate(self, db, app_label, model_name=None, **hints):
        if app_label == 'accounts':
            return db == 'default'
        elif app_label == 'products':
            return db == 'products'
        return None

âœ… ä¸‰ã€åœ¨ settings.py è£¡è¨»å†Šé€™å€‹ router

DATABASE_ROUTERS = ['sc.routers.AppRouter']

æ³¨æ„ï¼šå¦‚æœ routers.py æ”¾åœ¨å°ˆæ¡ˆè¨­å®šç›®éŒ„ sc/ è£¡ï¼Œå°±ç”¨ 'sc.routers.AppRouter'ã€‚
âœ… å››ã€å»ºç«‹è³‡æ–™åº« & é·ç§»ï¼ˆåˆ†é–‹é·ç§»ï¼‰

ä½ å¿…é ˆé‡å°ä¸åŒè³‡æ–™åº«åˆ†é–‹é·ç§»ï¼š

# å»ºç«‹ accounts çš„è³‡æ–™åº«è¡¨ï¼ˆæœƒå°æ‡‰åˆ° defaultï¼‰
python manage.py makemigrations accounts
python manage.py migrate --database=default

# å»ºç«‹ products çš„è³‡æ–™åº«è¡¨
python manage.py makemigrations products
python manage.py migrate --database=products

âœ… äº”ã€ä½¿ç”¨ Django admin é‚„æ˜¯ç…§å¸¸è¨»å†Š

åœ¨ accounts/admin.pyã€products/admin.py è¨»å†Š model å°±å¥½ï¼ŒDjango admin æœƒä¾ router è‡ªå‹•åˆ¤æ–·è©²ç”¨å“ªå€‹è³‡æ–™åº«ã€‚
