å¤ªå¥½äº†ï¼Œä½ èªªåˆ°çš„é€™å¥ï¼š

python
è¤‡è£½
ç·¨è¼¯
data = "var test = [OK]; var i = [test]aaa"
è‹¥è€å¸«æ˜¯åœ¨ Python + Django è£¡è¬›ã€Œå¦‚ä½•è™•ç†æ¨¡æ¿å¼è³‡æ–™ï¼ˆåƒ [OK]ã€[test]ï¼‰æˆ–åˆ‡å‰² JSON ä¸­çš„é¡ä¼¼å…§å®¹ã€ï¼Œæˆ‘å€‘å¯ä»¥å¾å¹¾å€‹å¯¦ç”¨è§’åº¦ä¾†è§£æé€™æ®µï¼Œä¸¦çµ¦ä½ ç¯„ä¾‹ï¼š

âœ… ä¸€ã€è™•ç†æ¨¡æ¿æ ¼å¼å­—ä¸² â†’ æ›¿æ› [OK] å’Œ [test]
å¦‚æœä½ æœ‰ä¸€å€‹é¡ä¼¼ä¸‹é¢çš„è³‡æ–™ï¼š

python
è¤‡è£½
ç·¨è¼¯
data = "var test = [OK]; var i = [test]aaa"
context = {
    "OK": "123",
    "test": "456"
}
ä½ æƒ³æŠŠ [OK]ã€[test] æ›¿æ›æˆå­—å…¸ä¸­çš„å€¼ï¼š

ğŸ”§ æ›¿æ›ç¨‹å¼ç¢¼ï¼š
python
è¤‡è£½
ç·¨è¼¯
import re

def replace_placeholders(text, context):
    return re.sub(r'\[(\w+)\]', lambda m: str(context.get(m.group(1), m.group(0))), text)

data = "var test = [OK]; var i = [test]aaa"
context = {
    "OK": "123",
    "test": "456"
}
result = replace_placeholders(data, context)
print(result)
ğŸ§¾ è¼¸å‡ºï¼š
csharp
è¤‡è£½
ç·¨è¼¯
var test = 123; var i = 456aaa
âœ… äºŒã€å¦‚æœä¾†è‡ª JSON â†’ ä½ è¦æ€éº¼è§£æ
å‡è¨­ä½ å¾å‰ç«¯å‚³ä¾† JSONï¼Œå¦‚ï¼š

json
è¤‡è£½
ç·¨è¼¯
{
  "script": "var test = [OK]; var i = [test]aaa",
  "context": {
    "OK": "123",
    "test": "456"
  }
}
ä½ å¯ä»¥åœ¨ Django view ä¸­è™•ç†é€™æ¨£çš„ POSTï¼š

ğŸ”§ Django View ç¯„ä¾‹ï¼š
python
è¤‡è£½
ç·¨è¼¯
import json
from django.http import JsonResponse
import re

def parse_template(request):
    if request.method == 'POST':
        body = json.loads(request.body)
        data = body.get("script", "")
        context = body.get("context", {})

        def replace(text, ctx):
            return re.sub(r'\[(\w+)\]', lambda m: str(ctx.get(m.group(1), m.group(0))), text)

        result = replace(data, context)
        return JsonResponse({"result": result})
âœ… ä¸‰ã€ä½ å­¸åˆ°çš„æŠ€èƒ½é‡é»ï¼š
æŠ€èƒ½	èªªæ˜
re.sub æ›¿æ›æ¨¡æ¿	ç”¨ [] æ‹¬è™Ÿæ¨™ç¤ºçš„è®Šæ•¸æ›¿æ›æˆå€¼
json.loads()	æŠŠ JSON è½‰æˆ Python dict
Django è™•ç† POST	æ¥æ”¶ JSONï¼Œé€²è¡Œé‚è¼¯è™•ç†å†å›å‚³çµæœ

